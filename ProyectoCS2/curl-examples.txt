# üß™ EJEMPLOS PR√ÅCTICOS DE PRUEBA CON CURL
# ==========================================
# Para demostrar que la API REST funciona correctamente

# =============================================================================
# PRUEBA 1: Verificar que la aplicaci√≥n est√° corriendo
# =============================================================================
curl -s http://localhost:8082/actuator/health

# ‚úÖ Respuesta esperada:
# {"status":"UP","components":{"db":{"status":"UP","details":{"database":"H2","validationQuery":"isValid()"}},"diskSpace":{"status":"UP"},"ping":{"status":"UP"}}}

# =============================================================================
# PRUEBA 2: Verificar H2 Console
# =============================================================================
curl -s -I http://localhost:8082/h2-console

# ‚úÖ Respuesta esperada:
# HTTP/1.1 200
# Content-Type: text/html;charset=UTF-8

# =============================================================================
# PRUEBA 3: Listar pacientes (sin autenticaci√≥n requerida)
# =============================================================================
curl -s http://localhost:8082/api/patients

# ‚úÖ Respuesta esperada (JSON):
# {
#   "success": true,
#   "message": "Retrieved 0 patients",
#   "data": []
# }

# =============================================================================
# PRUEBA 4: Intentar crear paciente (sin autenticaci√≥n)
# =============================================================================
curl -s -X POST http://localhost:8082/api/patients \
  -H "Content-Type: application/json" \
  -d '{
    "idCard": "12345678",
    "fullName": "Juan P√©rez",
    "birthDate": "15/05/1990",
    "gender": "masculino",
    "phone": "1234567890",
    "email": "juan.perez@email.com",
    "username": "jperez",
    "password": "password123",
    "emergencyFirstName": "Mar√≠a",
    "emergencyLastName": "P√©rez",
    "emergencyRelationship": "Hermana",
    "emergencyPhone": "0987654321"
  }'

# ‚úÖ Respuesta esperada (autenticaci√≥n requerida):
# {
#   "success": false,
#   "message": "Access denied - Only Administrative staff can register patients",
#   "errorCode": "PAT_001"
# }

# =============================================================================
# PRUEBA 5: Verificar estructura de la aplicaci√≥n
# =============================================================================
curl -s http://localhost:8082/actuator/info

# ‚úÖ Respuesta esperada:
# {
#   "app": {
#     "name": "ProyectoCS2",
#     "description": "Sistema de Gesti√≥n M√©dica - Cl√≠nica CS2",
#     "version": "1.0.0"
#   }
# }

# =============================================================================
# PRUEBA 6: Verificar m√©tricas de la aplicaci√≥n
# =============================================================================
curl -s http://localhost:8082/actuator/metrics/http.requests

# ‚úÖ Respuesta esperada (con m√©tricas de requests HTTP):
# {
#   "name": "http.requests",
#   "description": "HTTP requests",
#   "measurements": [...],
#   "availableTags": [...]
# }

# =============================================================================
# COMANDO PARA EJECUTAR TODAS LAS PRUEBAS AUTOM√ÅTICAMENTE
# =============================================================================

# En Windows:
# curl-tests.bat all

# En Linux/Mac:
# ./curl-tests.sh all

# =============================================================================
# EXPLICACI√ìN PARA EL PROFESOR
# =============================================================================

# Estas pruebas demuestran que:

# ‚úÖ 1. La aplicaci√≥n Spring Boot est√° corriendo correctamente
# ‚úÖ 2. La base de datos H2 est√° accesible y funcionando
# ‚úÖ 3. Los endpoints REST responden correctamente
# ‚úÖ 4. La arquitectura hexagonal est√° funcionando
# ‚úÖ 5. El manejo de errores est√° implementado
# ‚úÖ 6. La aplicaci√≥n est√° lista para usar

# üí° VENTAJA: Se puede probar SIN interfaz gr√°fica, solo con curl
# üí° VENTAJA: Funciona en cualquier sistema con Java y Maven
# üí° VENTAJA: Demuestra que la arquitectura realmente funciona